import{u as _,c as a,a as $,i as E,b as p,t as C}from"./index-57880aa4.js";import{s as u}from"./supabaseClient-fe222147.js";import{v as w}from"./v4-a960c1f4.js";const x=C('<div aria-live="polite"><form class=""><div><label for="description">Descrição: </label><input id="description" type="text"></div><div><button type="submit" class="">'),S=()=>{const m=_(),[i,n]=a(""),[l,s]=a(!0),[o,c]=a("");$(()=>{h()});const h=async()=>{try{s(!0);let{data:e,error:t}=await u.from("phase").select("id, description").eq("id",m.id).single();if(t)throw t;e&&(c(e.id),n(e.description))}catch(e){e instanceof Error&&alert(e.message)}finally{s(!1)}},g=async e=>{e.preventDefault();try{s(!0),o()||c(w());const t={id:o(),description:i()};let{error:r}=await u.from("phase").upsert(t).select();if(r)throw r}catch(t){t instanceof Error&&alert(t.message)}finally{s(!1)}};return(()=>{const e=x(),t=e.firstChild,r=t.firstChild,v=r.firstChild,d=v.nextSibling,b=r.nextSibling,f=b.firstChild;return t.addEventListener("submit",g),d.addEventListener("change",y=>n(y.currentTarget.value)),E(f,()=>l()?"Carregando...":"Atualizar fase"),p(()=>f.disabled=l()),p(()=>d.value=i()||""),e})()};export{S as default};
