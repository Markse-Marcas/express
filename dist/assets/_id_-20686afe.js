import{u as S,c as l,a as C,i as L,b as n,t as B}from"./index-57880aa4.js";import{s as x}from"./supabaseClient-fe222147.js";import{session as D}from"./App-9a428f80.js";const N=B('<div class="container" aria-live="polite"><form class=""><div class="form-control w-full max-w-xs"><label class="label"><span class="label-text">Nome da marca</span></label><input id="name" type="text" class="input input-bordered w-full max-w-xs"></div><div class="form-control w-full max-w-xs"><label class="label"><span class="label-text">Status</span></label><input id="status" type="text" class="input input-bordered w-full max-w-xs"></div><div><button type="submit" class="">'),A=()=>{const g=S(),[v,_]=l(null),[i,s]=l(!0),[c,o]=l(null),[d,u]=l(null);C(()=>{w()});const w=async()=>{try{s(!0);let{data:e,error:t}=await x.from("brand").select(`
                    customer_id,
                    id,
                    name, 
                    status
                `).eq("id",g.id).single();if(t)throw t;e&&(_(e.id),o(e.name),u(e.status))}catch(e){e instanceof Error&&alert(e.message)}finally{s(!1)}},h=async e=>{e.preventDefault();try{s(!0);const t={id:v(),name:c(),status:d(),customer_id:D()?.user.id};let{error:a}=await x.from("brand").upsert(t).select();if(a)throw a}catch(t){t instanceof Error&&alert(t.message)}finally{s(!1)}};return(()=>{const e=N(),t=e.firstChild,a=t.firstChild,$=a.firstChild,f=$.nextSibling,m=a.nextSibling,y=m.firstChild,p=y.nextSibling,E=m.nextSibling,b=E.firstChild;return t.addEventListener("submit",h),f.addEventListener("change",r=>o(r.currentTarget.value)),p.addEventListener("change",r=>u(r.currentTarget.value)),L(b,()=>i()?"Carregando...":"Atualizar marca"),n(()=>b.disabled=i()),n(()=>f.value=c()||""),n(()=>p.value=d()||""),e})()};export{A as default};
