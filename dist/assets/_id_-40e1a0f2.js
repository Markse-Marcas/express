import{u as I,c as i,a as T,i as q,b as n,t as D}from"./index-57880aa4.js";import{s as y}from"./supabaseClient-fe222147.js";import{v as z}from"./v4-a960c1f4.js";const A=D('<div aria-live="polite"><form class=""><div><label for="number">Número: </label><input id="number" type="number" min="1" max="45" required></div><div><label for="specification">Especificação</label><input id="specification" type="text"></div><label for="base_number">Número de base: </label><input id="base_number" type="number" min="0"><div><button type="submit" class="">'),j=()=>{const x=I(),[c,o]=i(),[u,b]=i(""),[d,s]=i(!0),[f,m]=i(1),[p,g]=i("");T(()=>{C()});const C=async()=>{try{s(!0);let{data:e,error:t}=await y.from("class").select(`
                    id,
                    number, 
                    specification,
                    base_number
                `).eq("id",x.id).single();if(t)throw t;e&&(b(e.id),m(e.number),g(e.specification),o(e.base_number))}catch(e){e instanceof Error&&alert(e.message)}finally{s(!1)}},E=async e=>{e.preventDefault();try{s(!0),u()||b(z());const t={baseNumber:c(),id:u(),number:f(),specification:p()};let{error:a}=await y.from("class").upsert(t).select();if(a)throw a}catch(t){t instanceof Error&&alert(t.message)}finally{s(!1)}};return(()=>{const e=A(),t=e.firstChild,a=t.firstChild,N=a.firstChild,v=N.nextSibling,_=a.nextSibling,S=_.firstChild,$=S.nextSibling,L=_.nextSibling,l=L.nextSibling,w=l.nextSibling,h=w.firstChild;return t.addEventListener("submit",E),v.addEventListener("change",r=>m(Number.parseInt(r.currentTarget.value))),$.addEventListener("change",r=>g(r.currentTarget.value)),l.addEventListener("change",r=>o(Number.parseInt(r.currentTarget.value))),q(h,()=>d()?"Carregando...":"Atualizar classe"),n(()=>h.disabled=d()),n(()=>v.value=f()),n(()=>$.value=p()||""),n(()=>l.value=c()),e})()};export{j as default};
